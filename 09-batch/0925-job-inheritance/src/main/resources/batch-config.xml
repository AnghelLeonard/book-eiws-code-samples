<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns="http://www.springframework.org/schema/batch"
  xsi:schemaLocation="http://www.springframework.org/schema/batch 
  http://www.springframework.org/schema/batch/spring-batch.xsd
  http://www.springframework.org/schema/beans 
  http://www.springframework.org/schema/beans/spring-beans.xsd">

  <step id="boilWaterStepParent" abstract="true">
    <tasklet ref="boilWater" />
  </step>
  <step id="addTeaStepParent" abstract="true">
    <tasklet ref="addTea" />
  </step>
  <step id="addWaterStepParent" abstract="true">
    <tasklet ref="addWater" />
  </step>

  <job id="prepareTeaJobPrent" abstract="true">
    <listeners>
      <listener ref="teaJobListener"/>
    </listeners>
  </job>

  <job id="prepareTeaJob" parent="prepareTeaJobPrent">
    <step id="boilWaterStepForMildTea" parent="boilWaterStepParent" next="addTeaStepForMildTea" />
    <step id="addTeaStepForMildTea" parent="addTeaStepParent" next="addWaterStepForMildTea"/>
    <step id="addWaterStepForMildTea" parent="addWaterStepParent"/>
  </job>
  
  <job id="prepareStrongTeaJob" parent="prepareTeaJobPrent">
    <step id="boilWaterStepForStringTea" parent="boilWaterStepParent" next="addTeaStep1ForStringTea" />
    <step id="addTeaStep1ForStringTea" parent="addTeaStepParent" next="addTeaStep2ForStringTea"/>
    <step id="addTeaStep2ForStringTea" parent="addTeaStepParent" next="addWaterStepForStringTea"/>
    <step id="addWaterStepForStringTea" parent="addWaterStepParent"/>
  </job>
  
</beans:beans>
